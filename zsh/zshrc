#!/usr/bin/env zsh

export ZSH="$HOME/.oh-my-zsh"
ZSH_THEME="robbyrussell"

export DOTFILES="$HOME/.dotfiles"
export EDITOR="nvim"
export PATH="$PATH:$HOME/.spoofdpi/bin"
export PNPM_HOME="$HOME/.local/share/pnpm"
case ":$PATH:" in
  *":$PNPM_HOME:"*) ;;
  *) export PATH="$PNPM_HOME:$PATH" ;;
esac

VI_MODE_SET_CURSOR=true

plugins=(
  git
  vi-mode
  zsh-autosuggestions
  zsh-syntax-highlighting
  zsh-history-substring-search
)

[[ -f "$ZSH/oh-my-zsh.sh" ]] && source "$ZSH/oh-my-zsh.sh"

if [ -z "${DOTFILES}" ]; then
  DOTFILES="$HOME/.dotfiles"
  [ -d "$DOTFILES/bin" ] && PATH="$DOTFILES/bin:$PATH"
  export DOTFILES
fi

if [ -z "${MY_Z_FILE}" ]; then
  MY_Z_FILE="$DOTFILES/z/z.lua"
  if ! command -v z &> /dev/null; then
    [ -f "$MY_Z_FILE" ] || printf "[\033[0;33mâš  WARN\033[0m] file $MY_Z_FILE was not found\n"
    eval "$(lua $MY_Z_FILE --init zsh)"
  fi
fi

if [ -z "${__DOT_SSH_PROFILES}" ]; then
  __DOT_SSH_PROFILES=("laradvil" "radvil" "radvil2")
  export __DOT_SSH_PROFILES
fi

[ -s "$DOTFILES/starship/init.zsh" ] && source "$DOTFILES/starship/init.zsh"
[ -s "$DOTFILES/fzf/init.zsh" ] && source "$DOTFILES/fzf/init.zsh"
[ -s "$DOTFILES/nnn/init.zsh" ] && source "$DOTFILES/nnn/init.zsh"
[ -s "$DOTFILES/webdev/init.zsh" ] && source "$DOTFILES/webdev/init.zsh"
[ -s "$DOTFILES/alias/init.zsh" ] && source "$DOTFILES/alias/init.zsh"

bindkey -s "\em" "zmux\n"

export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"  # This loads nvm
[ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion"  # This loads nvm bash_completion

